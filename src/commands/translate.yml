description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  deepl-api-key:
    type: env_var_name
    default: DEEPL_API_KEY
    description: |
      Environment variable name where the Deepl API key is set to.
  source-lang:
    type: string
    default: en
    description: |
      Source language of documents.
      See https://www.deepl.com/docs-api/translating-text/request/
  target-lang:
    type: string
    description: |
      Target language for documents to be translated into.
      See https://www.deepl.com/docs-api/translating-text/request/
  tag-handling:
    type: string
    default: "xml"
    description: |
      Set this to "xml" if your documents are written in Markdown.
      Deepl will preserve the formatting as-is, as such.
      Otherwise, set this as an empty string to disable.
      See https://www.deepl.com/docs-api/translating-text/request/
  file-paths:
    type: string
    default: "**/*\.(md|MD|markdown)"
    description: |
      File paths to glob for.
steps:
  - run:
      name: Translate files
      environment:
        DEEPL_API_KEY: << parameters.deepl-api-key >>
        SRC_LANG: << parameters.source-lang >>
        TARGET_LANG: << parameters.target-lang >>
        TAG_HANDLING: << parameters.tag-handling >>
      command: <<include(scripts/translate.sh)>> << parameters.file-paths >>
